<template>
  <div class="el-tiptap-editor__wrapper">
    <el-tiptap
      lang="en"
      :extensions="extensions"
      :content="content"
      :editor-properties="editorProperties"
      placeholder="Write something ..."
      @onInit="onInitEvent"
      @onTransaction="onTransactionEvent"
      @onFocus="onFocusEvent"
      @onBlur="onBlurEvent"
      @onPaste="onPasteEvent"
      @onDrop="onDropEvent"
      @onUpdate="onUpdateEvent"
    />
  </div>
</template>

<script>
  /* eslint-disable no-console */
  import {
    Blockquote,
    Bold,
    BulletList,
    CodeBlock,
    Doc,
    ElementTiptap,
    Heading,
    History,
    Image,
    Indent,
    Italic,
    ListItem,
    OrderedList,
    Paragraph,
    Strike,
    Text,
    TextAlign,
    TodoItem,
    TodoList,
    Underline,
  } from 'element-tiptap';

  export default {
    data() {
      return {
        extensions: [
          new Doc(),
          new Text(),
          new Paragraph(),
          new Heading({level: 5}),
          new Bold(),
          new Underline(),
          new Italic(),
          new Strike(),
          new Blockquote(),
          new CodeBlock(),
          new Image(),
          new TextAlign(),
          new ListItem(),
          new BulletList(),
          new OrderedList(),
          new TodoItem(),
          new TodoList(),
          new Indent(),
          new History(),
        ],

        editorProperties: {
          editorProps: { // https://prosemirror.net/docs/ref/#view.EditorProps
            handleKeyDown() {
              console.log('ðŸš€EditorProps: Keydown');
            },
            handleTextInput() {
              console.log('ðŸš€EditorProps: TextInput');
            },
          },
        },

        content: '<p><img src="https://i.ibb.co/4pJs2Lx/undraw-static-assets-rpm6.png" width="300"></p><p>Open <strong>Console</strong>, your action on the editor will be logged.</p>',
      };
    },

    methods: {
      onInitEvent() {
        console.log('ðŸ”¥init');
      },

      onTransactionEvent() {
        console.log('ðŸ”¥transaction');
      },

      onFocusEvent() {
        console.log('ðŸ”¥focus');
      },

      onBlurEvent() {
        console.log('ðŸ”¥blur');
      },

      onPasteEvent() {
        console.log('ðŸ”¥paste');
      },

      onDropEvent() {
        console.log('ðŸ”¥drop');
      },

      onUpdateEvent() {
        console.log('ðŸ”¥update');
      },
    },

    components: {
      'el-tiptap': ElementTiptap,
    },
  };
</script>
